<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximun-scale=1.0,minimun-scale=1.0,user-scalable=no">

    <title>东港-店铺</title>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/shop.css">
    <link rel="stylesheet" href="css/car.css">

    <script src="js/lib-flexible-2.0/index.min.js"></script>
</head>

<body>


    <div class="goback_box">
        <i class="goback_box_icon">&#xe66e;</i>CHANEL香奈儿
    </div>
    <!-- 店铺banner -->
    <div class="shop_banner">
        <img src="upload/shop_banner.jpg" alt="">
    </div>
    <div class="shop_img_box">
        <div class="shop_logo_box">
            <img src="upload/shoplog.png" alt="">


            <div class="shopfalg">
                <span>美妆护肤</span>
                <span>累计销量65534</span>
            </div>

            <h3>CHANEL香奈儿</h3>
            <div class="infos">
                <span class="info_zhekou">7折起</span>
                <span class="info_manjian">满500减200</span>
                <span class="info_zeng">赠</span>
            </div>

        </div>

        <nav class="shopnav">
            <a href="javascript:void(0);" class="cur">商品</a>
            <a href="javascript:void(0);">店铺</a>
        </nav>
    </div>

    <!-- 商品列表 -->
    <section class="tabNav shopmune" style="display: none;">
        <ul class="type">
            <li>香水</li>
            <li>口红</li>
            <li class="cur">彩妆</li>
            <li>面部护肤</li>
            <li>男士专区</li>
        </ul>
        <ul class="type_list">
            <li class="type_title">
                香水
            </li>
            <li class="type_item">
                <div class="shop_img">
                    <img src="upload/product_01.jpg" alt="">
                </div>
                <div class="detail">
                    <p>【七夕礼物】香奈儿(Cha nel)香水 黄色邂逅柔情淡 香水
                    </p>
                    <div class="price">
                        <span>HK$</span>339<span>.00</span>
                        <!-- <a class="btn_guige">选规格</a> -->
                        <!-- <a class="btn_jia">&#xe61d;</a> -->
                        <a class="btn_jia">&#xe61d;</a>
                    </div>
                    <div class="zhekou">
                        <!-- <span class="manjian">满500减200</span>
                        <span class="zhekounum">7折起</span> -->
                        <span class="zhekounum">7折起</span>
                        <del>HK$730.00</del>
                    </div>
                </div>
            </li>
            <li class="type_item">
                <div class="shop_img">
                    <img src="upload/product_01.jpg" alt="">
                </div>
                <div class="detail">
                    <p>【七夕礼物】香奈儿(Cha nel)香水 黄色邂逅柔情淡 香水
                    </p>
                    <div class="price">
                        <span>HK$</span>339<span>.00</span>
                        <!-- <a class="btn_guige">选规格</a> -->
                        <!-- <a class="btn_jia">&#xe61d;</a> -->
                        <a class="btn_guige">选规格</a>
                    </div>
                    <div class="zhekou">

                        <!-- <span class="manjian">满500减200</span>
                        <span class="zhekounum">7折起</span> -->
                        <span class="manjian">满500减200</span>
                        <del>HK$730.00</del>
                    </div>
                </div>
            </li>
            <li class="type_title">
                口红
            </li>
            <li class="type_item">
                <div class="shop_img">
                    <img src="upload/product_01.jpg" alt="">
                </div>
                <div class="detail">
                    <p>【七夕礼物】香奈儿(Cha nel)香水 黄色邂逅柔情淡 香水
                    </p>
                    <div class="price">
                        <span>HK$</span>339<span>.00</span>
                        <!-- <a class="btn_guige">选规格</a> -->
                        <!-- <a class="btn_jia">&#xe61d;</a> -->
                        <a class="btn_jia">&#xe61d;</a>
                    </div>
                    <div class="zhekou">
                        <!-- <span class="manjian">满500减200</span>
                        <span class="zhekounum">7折起</span> -->
                        <span class="zhekounum">7折起</span>
                        <del>HK$730.00</del>
                    </div>
                </div>
            </li>
            <li class="type_item">
                <div class="shop_img">
                    <img src="upload/product_01.jpg" alt="">
                </div>
                <div class="detail">
                    <p>【七夕礼物】香奈儿(Cha nel)香水 黄色邂逅柔情淡 香水
                    </p>
                    <div class="price">
                        <span>HK$</span>339<span>.00</span>
                        <!-- <a class="btn_guige">选规格</a> -->
                        <!-- <a class="btn_jia">&#xe61d;</a> -->
                        <a class="btn_guige">选规格</a>
                    </div>
                    <div class="zhekou">

                        <!-- <span class="manjian">满500减200</span>
                        <span class="zhekounum">7折起</span> -->
                        <span class="manjian">满500减200</span>
                        <del>HK$730.00</del>
                    </div>
                </div>
            </li>
            <li class="type_title">
                彩妆
            </li>
            <li class="type_item">
                <div class="shop_img">
                    <img src="upload/product_01.jpg" alt="">
                </div>
                <div class="detail">
                    <p>【七夕礼物】香奈儿(Cha nel)香水 黄色邂逅柔情淡 香水
                    </p>
                    <div class="price">
                        <span>HK$</span>339<span>.00</span>
                        <!-- <a class="btn_guige">选规格</a> -->
                        <!-- <a class="btn_jia">&#xe61d;</a> -->
                        <a class="btn_jia">&#xe61d;</a>
                    </div>
                    <div class="zhekou">
                        <!-- <span class="manjian">满500减200</span>
                        <span class="zhekounum">7折起</span> -->
                        <span class="zhekounum">7折起</span>
                        <del>HK$730.00</del>
                    </div>
                </div>
            </li>
            <li class="type_item">
                <div class="shop_img">
                    <img src="upload/product_01.jpg" alt="">
                </div>
                <div class="detail">
                    <p>【七夕礼物】香奈儿(Cha nel)香水 黄色邂逅柔情淡 香水
                    </p>
                    <div class="price">
                        <span>HK$</span>339<span>.00</span>
                        <!-- <a class="btn_guige">选规格</a> -->
                        <!-- <a class="btn_jia">&#xe61d;</a> -->
                        <a class="btn_guige">选规格</a>
                    </div>
                    <div class="zhekou">

                        <!-- <span class="manjian">满500减200</span>
                        <span class="zhekounum">7折起</span> -->
                        <span class="manjian">满500减200</span>
                        <del>HK$730.00</del>
                    </div>
                </div>
            </li>
            <li class="type_title">
                面部护肤
            </li>
            <li class="type_item">
                <div class="shop_img">
                    <img src="upload/product_01.jpg" alt="">
                </div>
                <div class="detail">
                    <p>【七夕礼物】香奈儿(Cha nel)香水 黄色邂逅柔情淡 香水
                    </p>
                    <div class="price">
                        <span>HK$</span>339<span>.00</span>
                        <!-- <a class="btn_guige">选规格</a> -->
                        <!-- <a class="btn_jia">&#xe61d;</a> -->
                        <a class="btn_jia">&#xe61d;</a>
                    </div>
                    <div class="zhekou">
                        <!-- <span class="manjian">满500减200</span>
                        <span class="zhekounum">7折起</span> -->
                        <span class="zhekounum">7折起</span>
                        <del>HK$730.00</del>
                    </div>
                </div>
            </li>
            <li class="type_item">
                <div class="shop_img">
                    <img src="upload/product_01.jpg" alt="">
                </div>
                <div class="detail">
                    <p>【七夕礼物】香奈儿(Cha nel)香水 黄色邂逅柔情淡 香水
                    </p>
                    <div class="price">
                        <span>HK$</span>339<span>.00</span>
                        <!-- <a class="btn_guige">选规格</a> -->
                        <!-- <a class="btn_jia">&#xe61d;</a> -->
                        <a class="btn_guige">选规格</a>
                    </div>
                    <div class="zhekou">

                        <!-- <span class="manjian">满500减200</span>
                        <span class="zhekounum">7折起</span> -->
                        <span class="manjian">满500减200</span>
                        <del>HK$730.00</del>
                    </div>
                </div>
            </li>
            <li class="type_title">
                男士专区
            </li>
            <li class="type_item">
                <div class="shop_img">
                    <img src="upload/product_01.jpg" alt="">
                </div>
                <div class="detail">
                    <p>【七夕礼物】香奈儿(Cha nel)香水 黄色邂逅柔情淡 香水
                    </p>
                    <div class="price">
                        <span>HK$</span>339<span>.00</span>
                        <!-- <a class="btn_guige">选规格</a> -->
                        <!-- <a class="btn_jia">&#xe61d;</a> -->
                        <a class="btn_jia">&#xe61d;</a>
                    </div>
                    <div class="zhekou">
                        <!-- <span class="manjian">满500减200</span>
                        <span class="zhekounum">7折起</span> -->
                        <span class="zhekounum">7折起</span>
                        <del>HK$730.00</del>
                    </div>
                </div>
            </li>
            <li class="type_item">
                <div class="shop_img">
                    <img src="upload/product_01.jpg" alt="">
                </div>
                <div class="detail">
                    <p>【七夕礼物】香奈儿(Cha nel)香水 黄色邂逅柔情淡 香水
                    </p>
                    <div class="price">
                        <span>HK$</span>339<span>.00</span>
                        <!-- <a class="btn_guige">选规格</a> -->
                        <!-- <a class="btn_jia">&#xe61d;</a> -->
                        <a class="btn_guige">选规格</a>
                    </div>
                    <div class="zhekou">

                        <!-- <span class="manjian">满500减200</span>
                        <span class="zhekounum">7折起</span> -->
                        <span class="manjian">满500减200</span>
                        <del>HK$730.00</del>
                    </div>
                </div>
            </li>
        </ul>

    </section>

    <!-- 店铺信息 -->
    <section class="tabNav shopinfo" style="display: none;">
        <div class="shopinfo-l-r">
            <i>&#xe616;</i><span>地址</span>
            <p>上海市浦东新区x606 距离市中心约15431米</p>
        </div>
        <div class="shopinfo-l-r">
            <i>&#xe64b;</i><span>联系电话</span>
            <p>+832 67832345</p> <a href="" class="contactsshop">联系卖家</a>
        </div>
        <div class="shopinfo-l-r">
            <i>&#xe6ae;</i><span>店铺介绍</span>
            <p>是由Gabrielle Chanel于1913年在法国巴黎 创立的品牌，至今已有百年历史。香奈儿时 装永远有着高雅、简洁、精美的风格。
            </p>
        </div>
        <div class="shopinfo-l-r">
            <i>&#xe669;</i><span>商家服务</span>
            <i style="color: #f32555;">&#xe65e;</i>
            <p>支持配送代运货
            </p>
        </div>
        <div class="shopinfo-l-r-img">
            <img src="upload/shop_xuanchuang.jpg" alt="">
            <img src="upload/shop_xuanchuang.jpg" alt="">
            <img src="upload/shop_xuanchuang.jpg" alt="">
            <img src="upload/shop_xuanchuang.jpg" alt="">
        </div>
    </section>

    <!-- 商品选择规格 -->
    <div class="shop_fix_select" style="display: none;">
        <div class="box_all">
            <img src="upload/product_01.jpg" alt="">
            <div class="box_hd">
                <p>【七夕礼物】香奈儿(Chanel) 香水 粉色邂逅柔情淡香水</p>
                <p><span>HK$</span>300<span>.00</span></p>
            </div>
            <h5>规格</h5>
            <div class="choose_gg">
                <a href="#">粉色邂逅柔情淡香水50ml</a>
                <a href="#" class="cur">绿色邂逅柔情淡香水35ml</a>
                <a href="#">粉色邂逅柔情淡香水50ml</a>
                <a href="#">绿色邂逅柔情淡香水35ml</a>
            </div>
            <h5>购买数量
                <div class="num_add">
                    <a href="#">-</a>
                    <span>1</span>
                    <a href="#">+</a>
                </div>
            </h5>
            <a href="" class="add_car">确定</a>
        </div>
    </div>

    <!-- 显示购物车信息 -->
    <div class="show_car_list" style="display: ;">

        <div class="show_car_max">
            <!-- 再买优惠 -->
            <div class="good_repurchase_yh">
                再买 300 可享受 1200-200
            </div>
            <div class="show_car_bg">
                <!-- 每一家店 -->
                <div class="goods_list">
                    <!-- 店铺标题 -->
                    <h3>
                        <span class="title">PARZIN帕森</span>
                        <a href="#" class="clearcar">清除购物车</a>
                    </h3>
                    <!-- 店铺内的购物车单 -->
                    <ul>
                        <li class="goods_item lose">
                            <div class="shop_img">
                                <img src="upload/goods_ext_160_160.jpg" alt="">
                            </div>
                            <div class="desc">
                                <p>【七夕礼物】香奈儿(Chanel)香水 粉色邂逅柔情淡香水
                                </p>
                                <div class="price">
                                    HK$<span>330.00</span>
                                </div>
                                <div class="lose_move">
                                    移除
                                </div>
                            </div>
                        </li>
                        <li class="goods_item">
                            <div class="shop_img">
                                <img src="upload/goods_ext_160_160.jpg" alt="">
                            </div>
                            <div class="desc">
                                <p>【七夕礼物】香奈儿(Chanel)香水 粉色邂逅柔情淡香水
                                </p>
                                <div class="price">
                                    HK$<span>330.00</span>
                                </div>
                                <div class="car_add">
                                    <a href="#">-</a>
                                    <span>1</span>
                                    <a href="#">+</a>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>

                <!-- 每一家店 -->
                <div class="goods_list">
                    <!-- 店铺标题 -->
                    <h3>
                        <span class="title">PARZIN帕森</span>
                        <a href="#" class="clearcar">清除购物车</a>
                    </h3>
                    <!-- 店铺内的购物车单 -->
                    <ul>
                        <li class="goods_item">
                            <img src="upload/goods_ext_160_160.jpg" alt="">
                            <div class="desc">
                                <p>【七夕礼物】香奈儿(Chanel)香水 粉色邂逅柔情淡香水
                                </p>
                                <div class="price">
                                    HK$<span>330.00</span>
                                </div>
                                <div class="car_add">
                                    <a href="#">-</a>
                                    <span>1</span>
                                    <a href="#">+</a>
                                </div>
                            </div>
                        </li>
                        <li class="goods_item">
                            <img src="upload/goods_ext_160_160.jpg" alt="">
                            <div class="desc">
                                <p>【七夕礼物】香奈儿(Chanel)香水 粉色邂逅柔情淡香水
                                </p>
                                <div class="price">
                                    HK$<span>330.00</span>
                                </div>
                                <div class="car_add">
                                    <a href="#">-</a>
                                    <span>1</span>
                                    <a href="#">+</a>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>

                <!-- 每一家店 -->
                <div class="goods_list">
                    <!-- 店铺标题 -->
                    <h3>
                        <span class="title">PARZIN帕森</span>
                        <a href="#" class="clearcar">清除购物车</a>
                    </h3>
                    <!-- 店铺内的购物车单 -->
                    <ul>
                        <li class="goods_item">
                            <img src="upload/goods_ext_160_160.jpg" alt="">
                            <div class="desc">
                                <p>【七夕礼物】香奈儿(Chanel)香水 粉色邂逅柔情淡香水
                                </p>
                                <div class="price">
                                    HK$<span>330.00</span>
                                </div>
                                <div class="car_add">
                                    <a href="#">-</a>
                                    <span>1</span>
                                    <a href="#">+</a>
                                </div>
                            </div>
                        </li>
                        <li class="goods_item">
                            <img src="upload/goods_ext_160_160.jpg" alt="">
                            <div class="desc">
                                <p>【七夕礼物】香奈儿(Chanel)香水 粉色邂逅柔情淡香水
                                </p>
                                <div class="price">
                                    HK$<span>330.00</span>
                                </div>
                                <div class="car_add">
                                    <a href="#">-</a>
                                    <span>1</span>
                                    <a href="#">+</a>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- 订单地板固定栏 -->
    <nav class="order_footer">
        <a href="#" class="icon_dianpu">店铺</a>
        <a href="#" class="icon_lianxi">联系商家</a>
        <a href="#" class="icon_car">购物车<i>3</i></a>
        <span>HK$200.24</span>
        <a href="#" class="btn_jiesuan">去结算</a>
    </nav>

    <script>
        // a商品与店铺选项卡切换 
        //1.获取事件源--tab切换
        var tabs = document.querySelector('.shopnav').querySelectorAll('a');
        var tabNavs = document.querySelectorAll('.tabNav');
        //2.注册事件--tab切换
        for (var i = 0; i < tabs.length; i++) {
            tabs[i].setAttribute('data-index', i);
            tabs[i].onclick = function() {
                //1 完成选项卡的样式切换
                //排他
                for (var b = 0; b < tabs.length; b++) {
                    tabs[b].className = '';
                }
                this.className = 'cur';
                //需要先排他
                //console.log(this.getAttribute('data-index'));
                var index = this.getAttribute('data-index');
                for (var b = 0; b < tabNavs.length; b++) {
                    tabNavs[b].style.display = 'none';
                }
                //完成选项卡内容的切换
                tabNavs[index].style.display = 'block';
            }
        }




        //b 商品 列表选项卡切换
        //1：获取事件源
        var shop_tabs_hd = document.querySelector('.shopmune').querySelector('.type').querySelectorAll('li');
        var shop_tabs_bd = document.querySelector('.shopmune').querySelector('.type_list').querySelectorAll('.type_title');

        //商品滚动盒子
        var box_scroll = document.querySelector('.shopmune').querySelector('.type_list');

        var timer = null;




        //2:注册事件
        for (var i = 0; i < shop_tabs_hd.length; i++) {
            shop_tabs_hd[i].setAttribute('data-index', i);
            shop_tabs_hd[i].onclick = function() {

                //1排他设置选项卡的样式切换
                for (var b = 0; b < shop_tabs_hd.length; b++) {
                    shop_tabs_hd[b].className = '';
                }
                this.className = 'cur';

                var index = this.getAttribute('data-index');
                //2 内容滚动
                //console.log(box_scroll);

                //var scrollTop = shop_tabs_bd[index - 0].offsetTop - shop_tabs_bd[0].offsetTop;
                var scrollTop = shop_tabs_bd[index - 0].offsetTop;

                console.log('shop_tabs_bd[index] scrollTop:' + scrollTop);


                var lastleader = null;


                //清除上次间歇调用的函数
                clearInterval(timer);

                //利用分段
                //设置一个间歇调用的的行数
                timer = setInterval(function() {

                    var leader = box_scroll.scrollTop;
                    // （1）设置步长
                    var step = (scrollTop - leader) / 10;
                    // (2) 为正：向上取整，为付向下取整
                    step = step > 0 ? Math.ceil(step) : Math.floor(step);

                    //（3）计算这次滚动的拘留
                    leader = leader + step;
                    //（4执行滚动 x , y）
                    box_scroll.scrollTo(0, leader);

                    //console.log(Math.abs(scrollTop - leader) + ':' + step);
                    //如果两次的绝对值小鱼步数，或者 两次移动后的位置一致则停止
                    if (Math.abs(scrollTop - leader) <= Math.abs(step) || lastleader == leader) {
                        box_scroll.scrollTo(0, scrollTop);
                        clearInterval(timer);
                        lastleader = 0;
                    }
                    lastleader = leader;

                }, 25);


                //box_scroll.scrollHeight(40);
                //box_scroll.scrollTo(0, scrollTop);
            }
        }

        box_scroll.addEventListener('scroll', function() {
            //console.log('滚动了' + this.scrollTop, '第彩妆个盒子' + shop_tabs_bd[0].offsetTop);

            //console.log('滚动了' + this.scrollTop);
            //console.log('滚动了' + shop_tabs_bd[0].offsetTop);
            //console.log('总高度' + this.scrollHeight);
            //console.log('实际高度' + this.offsetHeight);


            console.log('最后this.offsetHeight：' + this.offsetHeight);
            console.log('最后this.scrollTop：' + this.scrollTop);
            console.log('最后this.scrollHeight' + this.scrollHeight);
            for (var b = 0; b < shop_tabs_bd.length; b++) {
                //console.log('xx' + shop_tabs_bd[b].offsetTop)

                if (b + 1 < shop_tabs_bd.length) {
                    if (shop_tabs_bd[b].offsetTop <= this.scrollTop && shop_tabs_bd[b + 1].offsetTop >= this.scrollTop) {
                        //console.log('title:' + shop_tabs_bd[b].offsetTop, 'scroll' + this.scrollTop);
                        //console.log('草率了' + b);
                        for (var c = 0; c < shop_tabs_hd.length; c++) {
                            shop_tabs_hd[c].className = '';
                        }
                        shop_tabs_hd[b].className = 'cur';
                    }
                    // if (this.scrollHeight - this.scrollTop >= this.offsetHeight) {
                    //     for (var c = 0; c < shop_tabs_hd.length; c++) {
                    //         shop_tabs_hd[c].className = '';
                    //     }
                    //     shop_tabs_hd[shop_tabs_hd.length - 1].className = 'cur';
                    // } 
                }
            }

            if (this.scrollHeight - this.scrollTop == this.offsetHeight) {
                for (var c = 0; c < shop_tabs_hd.length; c++) {
                    shop_tabs_hd[c].className = '';
                }
                shop_tabs_hd[shop_tabs_hd.length - 1].className = 'cur';
            }

        })
    </script>


</body>

</html>